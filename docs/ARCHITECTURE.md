# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-17
**ë²„ì „**: 1.0.0

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì „ì²´ ì•„í‚¤í…ì²˜](#ì „ì²´-ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
4. [ë°ì´í„° íë¦„](#ë°ì´í„°-íë¦„)
5. [ì¸ì¦ ë° ê¶Œí•œ](#ì¸ì¦-ë°-ê¶Œí•œ)
6. [ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜](#ë§¤ì¹­-ì•Œê³ ë¦¬ì¦˜)
7. [ë°°í¬ ì•„í‚¤í…ì²˜](#ë°°í¬-ì•„í‚¤í…ì²˜)
8. [í™•ì¥ì„± ê³ ë ¤ì‚¬í•­](#í™•ì¥ì„±-ê³ ë ¤ì‚¬í•­)

---

## ì‹œìŠ¤í…œ ê°œìš”

**Vintage Audio Search & Match**ëŠ” ë¹ˆí‹°ì§€ ì˜¤ë””ì˜¤ ì»´í¬ë„ŒíŠ¸ ê²€ìƒ‰ ë° í˜¸í™˜ì„± ë§¤ì¹­ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥

1. **ì»´í¬ë„ŒíŠ¸ ê²€ìƒ‰**: Turntables, Tonearms, Cartridges, SUTs, Phono Preamps
2. **í˜¸í™˜ì„± ë§¤ì¹­**: í†¤ì•”-ì¹´íŠ¸ë¦¬ì§€ ê³µì§„ ì£¼íŒŒìˆ˜ ê³„ì‚° ë° ì¶”ì²œ
3. **ê´€ë¦¬ì ì‹œìŠ¤í…œ**: ì»´í¬ë„ŒíŠ¸ ë°ì´í„° CRUD ê´€ë¦¬
4. **ë°ì´í„° ìŠ¤í¬ë˜í•‘**: ì™¸ë¶€ ì†ŒìŠ¤ì—ì„œ ìŠ¤í™ ë°ì´í„° ìë™ ìˆ˜ì§‘

### ì‚¬ìš©ì ìœ í˜•

- **ì¼ë°˜ ì‚¬ìš©ì**: ì»´í¬ë„ŒíŠ¸ ê²€ìƒ‰ ë° ë§¤ì¹­ (Public)
- **ê´€ë¦¬ì**: ë°ì´í„° ê´€ë¦¬ ë° ì´ë¯¸ì§€ ì—…ë¡œë“œ (Admin)

---

## ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Client Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Next.js 14 Frontend (React 18 + TypeScript)            â”‚  â”‚
â”‚  â”‚  - App Router (File-system routing)                      â”‚  â”‚
â”‚  â”‚  - Tailwind CSS                                          â”‚  â”‚
â”‚  â”‚  - SWR (Data fetching & caching)                         â”‚  â”‚
â”‚  â”‚  - React Hook Form                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ HTTP/HTTPS
                              â†“ REST API (JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Gateway Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Express.js + TypeScript                                 â”‚  â”‚
â”‚  â”‚  - CORS Middleware                                       â”‚  â”‚
â”‚  â”‚  - Rate Limiter (15ë¶„ 100 ìš”ì²­)                          â”‚  â”‚
â”‚  â”‚  - JWT Authentication                                    â”‚  â”‚
â”‚  â”‚  - Zod Validation                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Controllers      â”‚  â”‚    Services        â”‚               â”‚
â”‚  â”‚  - Auth            â”‚  â”‚  - Matching        â”‚               â”‚
â”‚  â”‚  - Brands          â”‚  â”‚    Calculator      â”‚               â”‚
â”‚  â”‚  - Turntables      â”‚  â”‚  - Image           â”‚               â”‚
â”‚  â”‚  - Tonearms        â”‚  â”‚    Processing      â”‚               â”‚
â”‚  â”‚  - Cartridges      â”‚  â”‚                    â”‚               â”‚
â”‚  â”‚  - SUTs            â”‚  â”‚                    â”‚               â”‚
â”‚  â”‚  - Phono Preamps   â”‚  â”‚                    â”‚               â”‚
â”‚  â”‚  - Upload          â”‚  â”‚                    â”‚               â”‚
â”‚  â”‚  - Matcher         â”‚  â”‚                    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Data Access Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Prisma ORM                                              â”‚  â”‚
â”‚  â”‚  - Type-safe queries                                     â”‚  â”‚
â”‚  â”‚  - Migrations                                            â”‚  â”‚
â”‚  â”‚  - Seeding                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Database Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL                                              â”‚  â”‚
â”‚  â”‚  - Brands                                                â”‚  â”‚
â”‚  â”‚  - Turntables, Tonearms, Cartridges                     â”‚  â”‚
â”‚  â”‚  - SUTs, Phono Preamps                                   â”‚  â”‚
â”‚  â”‚  - Compatibility Data                                    â”‚  â”‚
â”‚  â”‚  - Production Periods                                    â”‚  â”‚
â”‚  â”‚  - User Setups                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    External Services                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Web Scraping      â”‚  â”‚  File Storage      â”‚               â”‚
â”‚  â”‚  - Puppeteer       â”‚  â”‚  - Local uploads/  â”‚               â”‚
â”‚  â”‚  - Cheerio         â”‚  â”‚  - Multer          â”‚               â”‚
â”‚  â”‚  - Axios           â”‚  â”‚  - Sharp           â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend

| ê³„ì¸µ | ê¸°ìˆ  | ìš©ë„ |
|-----|------|------|
| **Framework** | Next.js 14 | React í”„ë ˆì„ì›Œí¬, SSR/SSG |
| **UI Library** | React 18 | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ |
| **Language** | TypeScript | íƒ€ì… ì•ˆì „ì„± |
| **Styling** | Tailwind CSS | ìœ í‹¸ë¦¬í‹° CSS í”„ë ˆì„ì›Œí¬ |
| **State Management** | SWR | ì„œë²„ ìƒíƒœ ê´€ë¦¬ |
| **Form Management** | React Hook Form | í¼ ìƒíƒœ ë° ê²€ì¦ |
| **HTTP Client** | Axios | API í†µì‹  |
| **Charts** | Recharts | ê³µì§„ ì£¼íŒŒìˆ˜ ì°¨íŠ¸ |
| **Rich Text** | React Quill | ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° |
| **Icons** | Lucide React | ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| **Notifications** | React Hot Toast | í† ìŠ¤íŠ¸ ì•Œë¦¼ |

### Backend

| ê³„ì¸µ | ê¸°ìˆ  | ìš©ë„ |
|-----|------|------|
| **Framework** | Express.js | HTTP ì„œë²„ |
| **Language** | TypeScript | íƒ€ì… ì•ˆì „ì„± |
| **ORM** | Prisma | ë°ì´í„°ë² ì´ìŠ¤ ORM |
| **Database** | PostgreSQL | ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ |
| **Validation** | Zod | ëŸ°íƒ€ì„ ìŠ¤í‚¤ë§ˆ ê²€ì¦ |
| **Authentication** | JWT | í† í° ê¸°ë°˜ ì¸ì¦ |
| **Password** | bcryptjs | ë¹„ë°€ë²ˆí˜¸ í•´ì‹± |
| **File Upload** | Multer | ë©€í‹°íŒŒíŠ¸ í¼ ë°ì´í„° |
| **Image Processing** | Sharp | ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•/ìµœì í™” |
| **Web Scraping** | Puppeteer, Cheerio | ë°ì´í„° ìˆ˜ì§‘ |
| **HTTP Client** | Axios | ì™¸ë¶€ API í˜¸ì¶œ |
| **Rate Limiting** | express-rate-limit | API ìš”ì²­ ì œí•œ |

---

## ë°ì´í„° íë¦„

### 1. Public í˜ì´ì§€ (ì»´í¬ë„ŒíŠ¸ ê²€ìƒ‰)

```
User
  â†“
Browser (Next.js Client)
  â†“
GET /api/cartridges (SWR)
  â†“
Express Router â†’ Controller
  â†“
Prisma ORM
  â†“
PostgreSQL
  â†“
JSON Response
  â†“
SWR Cache
  â†“
React Component Render
  â†“
User sees Cartridge List
```

### 2. ë§¤ì¹­ ì‹œìŠ¤í…œ

```
User selects components
  â†“
POST /api/matcher/calculate
  {
    tonearmId, cartridgeId,
    sutId?, phonoPreampId?,
    headshellWeight?
  }
  â†“
Matcher Controller
  â†“
1. Fetch components (Prisma)
2. Validate required data
3. Estimate missing data (e.g., cartridge weight)
4. Map to calculator interfaces
  â†“
Matching Calculator Service
  â†“
Calculate:
  - Effective Mass (total)
  - Resonance Frequency
  - Compliance Match
  - Output Voltage (with SUT)
  - Recommendation Score
  â†“
JSON Response with:
  - Components details
  - Matching results
  - Chart data
  - Warnings
  â†“
React Components:
  - MatchingResults
  - ResonanceChart
  - CalculationDetail
  â†“
User sees compatibility analysis
```

### 3. Admin CRUD (ì˜ˆ: SUT ìƒì„±)

```
Admin fills form
  â†“
POST /api/suts
  {
    brandId, modelName,
    transformerType, gainDb, ...
  }
  â†“
JWT Middleware (authenticate)
  â†“
Admin Middleware (authorize)
  â†“
Zod Validation
  â†“
Controller â†’ Prisma
  â†“
PostgreSQL INSERT
  â†“
201 Created Response
  â†“
SWR Mutate (revalidate)
  â†“
Table refreshes with new SUT
```

### 4. ì´ë¯¸ì§€ ì—…ë¡œë“œ

```
Admin selects file or enters URL
  â†“
Case 1: File Upload
  POST /api/upload/image
  FormData { image: File }
  â†“
  Multer (memory storage)
  â†“
  Sharp (resize, optimize, convert to JPEG)
  â†“
  Save to /uploads/images/
  â†“
  Return { url: "/uploads/images/abc123.jpg" }

Case 2: URL Download
  POST /api/upload/from-url
  { url: "https://example.com/image.jpg" }
  â†“
  Axios (download)
  â†“
  Sharp (process)
  â†“
  Save to /uploads/images/
  â†“
  Return { url: "/uploads/images/abc123.jpg" }
  â†“
Form sets imageUrl field
  â†“
Submit with imageUrl
```

---

## ì¸ì¦ ë° ê¶Œí•œ

### ì¸ì¦ í”Œë¡œìš°

```
1. Login
   User â†’ POST /api/auth/login { username, password }
   â†“
   Validate credentials (bcrypt)
   â†“
   Generate JWT token (7-day expiry)
   â†“
   Return { token, user }
   â†“
   Frontend stores token in localStorage

2. Authenticated Request
   Admin Page Load â†’ AuthGuard component
   â†“
   Check localStorage token
   â†“
   GET /api/auth/me (with Bearer token)
   â†“
   JWT Middleware validates token
   â†“
   Return user info OR 401 Unauthorized
   â†“
   AuthGuard renders children OR redirects to /admin/login

3. API Request
   Admin action (e.g., Create SUT)
   â†“
   Axios interceptor adds Bearer token
   â†“
   POST /api/suts (with token)
   â†“
   authenticateToken middleware
   â†“
   requireAdmin middleware
   â†“
   Controller processes request
```

### ê¶Œí•œ ë ˆë²¨

| ë ˆë²¨ | ì„¤ëª… | ì—”ë“œí¬ì¸íŠ¸ ì˜ˆì‹œ |
|-----|------|----------------|
| **Public** | ì¸ì¦ ë¶ˆí•„ìš” | GET /api/cartridges, /matcher |
| **Authenticated** | JWT í† í° í•„ìš” | GET /api/auth/me |
| **Admin** | ê´€ë¦¬ì ê¶Œí•œ í•„ìš” | POST/PUT/DELETE /api/* |

---

## ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜

### ê³µì§„ ì£¼íŒŒìˆ˜ ê³„ì‚°

**ê³µì‹:**
```
f_r = (1 / 2Ï€) Ã— âˆš(k / M_total)

where:
  k = 1 / Compliance (N/m)
  M_total = Effective Mass + Cartridge Weight + Headshell Weight (g â†’ kg)
```

**ì´ìƒì  ë²”ìœ„:** 8-12 Hz

### ë§¤ì¹­ ì ìˆ˜ ê³„ì‚°

```typescript
function calculateScore(resonanceFrequency: number): number {
  if (resonanceFrequency >= 8 && resonanceFrequency <= 12) {
    return 100; // EXCELLENT
  } else if (resonanceFrequency >= 7 && resonanceFrequency <= 15) {
    return 85;  // GOOD
  } else if (resonanceFrequency >= 6 && resonanceFrequency <= 18) {
    return 70;  // ACCEPTABLE
  } else {
    return 40;  // POOR
  }
}
```

### ì¶”ì²œ ë¡œì§

```typescript
if (score >= 90) return "EXCELLENT";
if (score >= 75) return "GOOD";
if (score >= 60) return "ACCEPTABLE";
return "POOR";
```

### ì¹´íŠ¸ë¦¬ì§€ ë¬´ê²Œ ì¶”ì •

ì¹´íŠ¸ë¦¬ì§€ ë¬´ê²Œ ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ìë™ ì¶”ì •:

```
1. ë™ì¼ ë¸Œëœë“œ + ë™ì¼ íƒ€ì… ì¹´íŠ¸ë¦¬ì§€ í‰ê· 
2. ì—†ìœ¼ë©´ â†’ ë™ì¼ íƒ€ì… ëª¨ë“  ë¸Œëœë“œ í‰ê· 
3. ì—†ìœ¼ë©´ â†’ Error (calculation impossible)
```

---

## ë°°í¬ ì•„í‚¤í…ì²˜

### ê°œë°œ í™˜ê²½

```
Developer Machine
  â”œâ”€â”€ Frontend: http://localhost:3000 (Next.js dev server)
  â””â”€â”€ Backend: http://localhost:4000 (tsx watch)
  â””â”€â”€ Database: localhost:5432 (PostgreSQL)
```

### í”„ë¡œë•ì…˜ í™˜ê²½ (ê¶Œì¥)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Load Balancer / CDN               â”‚
â”‚            (Cloudflare / AWS ALB)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Frontend    â”‚  â”‚   Backend     â”‚
        â”‚   (Vercel)    â”‚  â”‚   (Railway)   â”‚
        â”‚   Next.js     â”‚  â”‚   Express.js  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   PostgreSQL      â”‚
                        â”‚   (Railway DB)    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  File Storage     â”‚
                        â”‚  (S3 / R2)        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»¨í…Œì´ë„ˆí™” (Docker)

**docker-compose.yml** (ê°œë°œ í™˜ê²½)

```yaml
version: '3.8'
services:
  frontend:
    build: ./vintage-audio-frontend
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=http://backend:4000

  backend:
    build: ./vintage-audio-backend
    ports:
      - "4000:4000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/vintage_audio
    depends_on:
      - db

  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=vintage_audio
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:
```

---

## í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### 1. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

**ì¸ë±ì‹±:**
- Brand name, model name (ê²€ìƒ‰ ì„±ëŠ¥)
- Foreign keys (JOIN ì„±ëŠ¥)
- Production period dates (ë²”ìœ„ ì¿¼ë¦¬)

**ì¿¼ë¦¬ ìµœì í™”:**
- Prisma `include` ìµœì†Œí™”
- Pagination êµ¬í˜„ (í˜„ì¬ ë¯¸êµ¬í˜„)
- Count queries ìºì‹±

### 2. API ìºì‹±

**Redis ë„ì… (í–¥í›„):**
```
GET /api/brands
  â†“
  Check Redis cache
  â†“
  Cache hit â†’ Return
  â†“
  Cache miss â†’ Query DB â†’ Store in Redis (TTL: 1ì‹œê°„)
```

### 3. ì´ë¯¸ì§€ ìµœì í™”

**í˜„ì¬:**
- Sharpë¡œ ë¦¬ì‚¬ì´ì§• (1200x1200)
- JPEG ë³€í™˜ (85% quality)
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ì €ì¥

**ê°œì„  ë°©ì•ˆ:**
- CDN ì‚¬ìš© (Cloudflare R2, AWS S3)
- WebP í¬ë§· ì§€ì›
- ì´ë¯¸ì§€ lazy loading (Next.js Image ì»´í¬ë„ŒíŠ¸)

### 4. ë¡œë“œ ë°¸ëŸ°ì‹±

**ìˆ˜í‰ í™•ì¥:**
```
Load Balancer
  â†“
Backend Instance 1 â”€â”
Backend Instance 2 â”€â”¼â”€ PostgreSQL (Primary)
Backend Instance 3 â”€â”˜
```

**ì„¸ì…˜ ì €ì¥ì†Œ:**
- JWTëŠ” stateless (ë³„ë„ ì„¸ì…˜ ì €ì¥ì†Œ ë¶ˆí•„ìš”)

### 5. ëª¨ë‹ˆí„°ë§ & ë¡œê¹…

**ë„ì… ê²€í† :**
- **Application Monitoring**: Sentry (ì—ëŸ¬ ì¶”ì )
- **Performance Monitoring**: New Relic, Datadog
- **Logging**: Winston, Pino (structured logging)
- **Analytics**: Google Analytics, Plausible

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. ì¸ì¦

- âœ… JWT ê¸°ë°˜ ì¸ì¦
- âœ… bcrypt ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
- âš ï¸ HTTPS í•„ìˆ˜ (í”„ë¡œë•ì…˜)
- âš ï¸ Refresh Token ë¯¸êµ¬í˜„ (í–¥í›„ ê°œì„ )

### 2. API ë³´ì•ˆ

- âœ… Rate Limiting (15ë¶„ 100 ìš”ì²­)
- âœ… CORS í™œì„±í™”
- âœ… Zod ê²€ì¦ (ì…ë ¥ sanitization)
- âš ï¸ SQL Injection ë°©ì§€ (Prisma ORM ì‚¬ìš©)
- âš ï¸ XSS ë°©ì§€ (React ìë™ ì´ìŠ¤ì¼€ì´í”„)

### 3. íŒŒì¼ ì—…ë¡œë“œ

- âœ… íŒŒì¼ í¬ê¸° ì œí•œ (10MB)
- âœ… ì´ë¯¸ì§€ íƒ€ì… ê²€ì¦
- âš ï¸ Virus scanning ë¯¸êµ¬í˜„

### 4. í™˜ê²½ ë³€ìˆ˜

- âœ… `.env` íŒŒì¼ (gitignore)
- âœ… JWT_SECRET í™˜ê²½ ë³€ìˆ˜
- âš ï¸ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ê°•ë ¥í•œ ë¹„ë°€í‚¤ ì‚¬ìš© í•„ìˆ˜

---

## ì°¸ê³ 

- [Backend êµ¬ì¡°](./BACKEND_STRUCTURE.md)
- [Backend API ëª…ì„¸](./BACKEND_API.md)
- [Frontend êµ¬ì¡°](./FRONTEND_STRUCTURE.md)
- [Frontend Routes](./FRONTEND_ROUTES.md)
