# 기능 개발: Admin 페이지 전면 개선 및 완성

> 📘 **문서 관리**: 본 문서는 [`docs/DOCORDER.md`](../DOCORDER.md) 규칙에 따라 작성되었습니다.

**시작일**: 2025-12-17
**담당자**: Claude Code
**우선순위**: High
**상태**: Planning (계획 단계)
**최종 업데이트**: 2025-12-17

---

## 📊 진행 상황 요약

**Phase 진행률**: 5/7 Phase 완료 (71%)
**Task 진행률**: 140/150+ Task 완료 (93%)

| Phase | 상태 | 진행률 | 주요 산출물 |
|-------|------|-------|-----------|
| Phase 1 | ✅ 완료 | 100% | BACKEND_DATA.md, COLUMN_MAPPING.md, QA_TEST_CHECKLIST.md |
| Phase 2 | ✅ 완료 | 100% | Turntable Admin 페이지 (700+ lines) |
| Phase 3 | ✅ 완료 | 100% | 4개 Admin 페이지 확장 (31→108 필드) |
| Phase 4 | ✅ 완료 | 100% | IMAGE_UX_FLOW.md (600+ lines) |
| Phase 5 | ✅ 완료 | 100% | ERROR_HANDLING_GUIDE.md (550+ lines) |
| Phase 6 | 🔄 진행중 | 80% | 산출물 통합 및 문서 정리 |
| Phase 7 | ⏸️ 대기 | 0% | QA 테스트 및 최종 검증 |

**Phase별 완료 현황**:
- ✅ **Phase 1** (2025-12-17): 문서 및 스키마 작업
  - BACKEND_DATA.md (36K, 9개 모델)
  - COLUMN_MAPPING.md (335 lines, 5개 모델)
  - QA_TEST_CHECKLIST.md (424 lines)
  - Cartridge 스키마 개선 (12개 신규 필드)
  - Prisma Schema & Zod Schema 업데이트
  - Database Migration 완료

- ✅ **Phase 2** (2025-12-17 23:00): Turntable Admin 생성
  - `/app/admin/turntables/page.tsx` (700+ lines)
  - 완전한 CRUD 기능 (8개 섹션, 36+ 필드)

- ✅ **Phase 3** (2025-12-17 23:30-00:15): Admin 페이지 확장
  - SUT Admin: 6→26 필드 (790+ lines)
  - Cartridge Admin: 10→22 필드 (750+ lines)
  - Tonearm Admin: 7→25 필드 (830+ lines)
  - Phono Preamp Admin: 8→35 필드 (993 lines)
  - **총 77개 신규 필드 추가** (31→108 필드)

- ✅ **Phase 4** (2025-12-18 00:45): Image UX Flow 검증
  - IMAGE_UX_FLOW.md (600+ lines)
  - ImageUpload 컴포넌트 개선
  - 6가지 시나리오 모두 구현 및 검증

- ✅ **Phase 5** (2025-12-18 01:15): Error Display 개선
  - Backend 에러 미들웨어 (220+ lines)
  - Frontend api.ts 개선
  - ERROR_HANDLING_GUIDE.md (550+ lines)
  - 환경별 에러 표시 전략 구현

**다음 액션**: Phase 6 완료 → Phase 7 QA 테스트

---

## 📝 사용자 요청

> 새로운 스프린트를 시작해 줘.
> - DOCORDER.md를 베이스로 작업 계획을 작성해 줘.
> - 바로 코드 수정을 하진 않을 거고, 아래 내용을 보고 계획을 세워서 설명해 줘. 몇번의 리뷰 이후에 최종 요구사항이 정리가 되면 작업을 시작하도록 요청할 거야
> - turntable, tonearm, cartridge, sut, phonoamp의 데이터를 관리할 수 있는 admin 생성이 목적.
> - 모든 column 데이터는 수정이 필요해. 현재 column 데이터가 정리가 되어 있지 않다면, BACKEND_DATA.md 파일에 해당 내용을 정리해 줘.
> - image의 경우 현재 저장되어 있는 이미지가 있다면 이미지 형태로 보여주고, 업데이트는 url이나 upload를 통해서 진행하고 싶어.
> - 디버그 모드에서는 client 상에서도 최대한 에러 내용을 자세하게 보여주고 싶어. 릴리즈에서는 간소한 에러내역으로 변경
>
> **추가 요구사항 (2025-12-17)**:
> - admin에서 각 수치들을 입력할 때 text로도 입력을 받지만, 기존에 입력된 값을 기반으로 하는 dropbox도 생성
> - 어떤 큰 범주를 벗어나지 않기 때문에 많은 제품들에서 비슷한 값들이 대상이 될 것으로 보임
> - 예를 들면 톤암의 경우 대부분의 톤암이 9" / 12" 임
>
> **Cartridge 스키마 개선 요구사항 (2025-12-17)**:
> - **목적**: Resonance 계산, SUT/Phono Preamp 매칭 기능을 위한 필수 필드 추가
> - **원칙**: 기존 스키마 구조 유지, 새 필드는 대부분 optional로 추가
> - **추가 필드 (10개 mandatory)**:
>   1. `complianceType` (Enum): dynamic-10hz, dynamic-100hz, static, unknown
>   2. `complianceDirection` (Enum): lateral, vertical, both, unspecified
>   3. `dcResistance` (Float?, Ω): DC 저항
>   4. `inductance` (Float?, mH): 인덕턴스
>   5. `mountType` (Enum): half-inch, p-mount, integrated-spu, sme-integrated, other
>   6. `bodyMaterial` (String?): 바디 재질
>   7. `verticalTrackingAngle` (Float?, degrees): VTA 각도
>   8. `recommendedUse` (Enum): stereo, mono, 78rpm, universal
>   9. `specSourceUrl` (String?): 스펙 출처 URL
>   10. `notes` (String?): 추가 메모
> - **선택적 추가**: `freqResponseRaw` (String?), `outputCategory` (Enum?)
> - **구현 고려사항**:
>   - Compliance type과 frequency는 resonance 계산에 핵심
>   - DC resistance와 inductance는 SUT 매칭에 필수
>   - MountType은 호환성 판단용
>   - Enum 값들은 향후 확장 가능하도록 설계

---

## 🎯 작업 개요

현재 admin 페이지는 기본적인 CRUD 기능만 구현되어 있으며, Prisma schema에 정의된 수십 개의 컬럼 중 극히 일부만 관리 가능한 상태입니다. 이번 Sprint에서는 다음을 달성합니다:

1. **완전한 데이터 관리**: Prisma schema의 모든 컬럼을 admin에서 입력/수정 가능하도록 확장
2. **Turntable Admin 추가**: 현재 누락된 TurntableBase admin 페이지 생성
3. **이미지 관리 개선**: 현재 이미지 미리보기 + URL/Upload 업데이트 (이미 구현됨, 검증 필요)
4. **에러 표시 개선**: 개발 환경에서 상세 에러 표시, 프로덕션에서 간소화
5. **문서 정리**: BACKEND_DATA.md에 모든 데이터베이스 컬럼 명세 추가

---

## 🔍 현재 상태 분석

### 기존 Admin 페이지

| 컴포넌트 | 페이지 경로 | 관리 가능한 필드 수 | 전체 필드 수 | 완성도 |
|---------|------------|-------------------|--------------|--------|
| **SUT** | `/admin/suts` | 6개 | 30개+ | 20% |
| **Cartridge** | `/admin/cartridges` | 10개 | 40개+ | 25% |
| **Tonearm** | `/admin/tonearms` | 7개 | 35개+ | 20% |
| **Phono Preamp** | `/admin/phono-preamps` | 8개 | 35개+ | 23% |
| **Turntable** | ❌ **없음** | 0개 | 40개+ | 0% |
| **Brand** | `/admin/brands` | 7개 | 8개 | ✅ 87% |

### 주요 문제점

1. **컬럼 누락**: 대부분의 기술 스펙 필드가 admin UI에서 누락
   - 예: Tonearm의 bearingType, vtaAdjustable, antiSkateType 등
   - 예: Cartridge의 stylusType, cantilevMaterial, freqResp 등

2. **컬럼 관리 범위 불명확**: "모든 컬럼"이라고 되어 있으나, 실제로 관리 필요성 검토 필요
   - 자동 관리 필드 (createdAt, updatedAt, id 등)는 수정 불필요
   - 입력/수정 가능 컬럼과 읽기 전용 컬럼 구분 필요

3. **Turntable Admin 부재**: TurntableBase 모델에 대한 admin 페이지가 완전히 없음

4. **이미지 관리 플로우 미검증**: 현재 ImageUpload 컴포넌트가 있지만 전체 UX 플로우 검증 필요
   - 업로드, URL 입력, 미리보기, 삭제, 실패 시 fallback 등

5. **에러 표시 기준 불명확**: 모든 환경에서 동일한 에러 메시지 (개선 필요)
   - "디버그 모드" 기준이 불명확 (NODE_ENV vs DEBUG 플래그)

6. **Task 산출물 미정의**: 각 단계별 산출물(컬럼 매핑표, UX 플로우, QA 시나리오)이 명시되지 않음

---

## 🎯 목표

### 주요 목표

- [ ] **완전한 CRUD**: 5개 컴포넌트(Turntable, Tonearm, Cartridge, SUT, Phono Preamp) **관리 필요 필드** 전체 관리 가능
- [ ] **Turntable Admin**: TurntableBase admin 페이지 신규 생성 (최우선)
- [ ] **사용자 경험**: 긴 폼 섹션별 그룹화 + 수치 입력 자동완성
- [ ] **이미지 관리**: 완전한 UX 플로우 (업로드/URL/미리보기/삭제/에러)
- [ ] **에러 처리**: 환경별 에러 표시 전략 구현 (기준 명확화)
- [ ] **문서 정리**: 컬럼 매핑표 + UX 플로우 + QA 시나리오

### 성공 기준

1. **컬럼 매핑 완료**: 각 모델별 "입력/수정 가능 컬럼" vs "읽기 전용 컬럼" 체크리스트 작성
2. **Turntable admin 완성**: 40개+ 필드 모두 관리 가능
3. **이미지 UX 검증**: 업로드/URL/미리보기/삭제/실패 시나리오 모두 동작
4. **에러 처리 명확화**: NODE_ENV 기반 에러 표시 분기 + 문서화
5. **수치 입력 UX**: 빈도순/최근 입력값 기반 자동완성 동작
6. **산출물 완성**:
   - 컬럼 매핑표 (5개 모델)
   - 이미지 UX 플로우 시나리오
   - QA 테스트 체크리스트

---

## 📋 작업 계획

### Phase 1: 현황 분석 및 설계 (1일)

**목표**: 정확한 요구사항 파악 및 설계 문서 작성

#### 1.1 데이터베이스 컬럼 분석 및 매핑
- [x] Prisma schema 전체 분석 완료 (BACKEND_DATA.md)
- [ ] **Cartridge 스키마 업데이트** (신규 요구사항 반영):
  - BACKEND_DATA.md에 10개 신규 필드 추가
  - Enum 타입 정의 (complianceType, complianceDirection, mountType, recommendedUse)
  - 필드 그룹화: Compliance 상세, 전기적 특성, 마운팅/구조, 메타데이터
- [ ] **컬럼 관리 범위 분류** (각 모델별):
  - **입력/수정 가능 컬럼**: Admin UI에서 직접 관리
  - **읽기 전용 컬럼**: 표시만 (id, createdAt, updatedAt 등)
  - **자동 관리 컬럼**: UI에 미표시 (내부 로직에서 자동 설정)
- [ ] 각 모델별 필드 상세 분류:
  - Required vs Optional
  - 입력 타입 (text, number, select, boolean, textarea, date, combobox)
  - Enum 값 목록
  - 자동완성 대상 여부 (수치 필드)
- [ ] 필드 그룹화 전략 수립:
  - 기본 정보 (Brand, Model Name 등)
  - 기술 스펙
  - 물리적 특성 (크기, 무게)
  - 이미지 및 문서
  - 메타데이터
- [ ] **산출물**: 컬럼 매핑표 (5개 모델)
  - 각 모델별 Markdown 표 형식
  - 컬럼명 | 타입 | 관리범위 | UI 컴포넌트 | 비고
  - Cartridge 모델에 10개 신규 필드 포함

#### 1.2 UI/UX 설계
- [ ] 긴 폼 처리 방법 결정:
  - 옵션 A: 탭으로 섹션 분리
  - 옵션 B: 아코디언 (접을 수 있는 섹션)
  - 옵션 C: 멀티 스텝 폼 (Step 1, 2, 3...)
- [ ] 필수 필드 vs 선택 필드 표시 전략
- [ ] Enum 값 select 디자인
- [ ] **수치 입력 필드 자동완성 시스템**:
  - 기존 DB에 입력된 값들을 분석하여 자주 사용되는 값 추출
  - Combobox 형태: 드롭다운에서 선택 또는 직접 입력 가능
  - **빈도순 정렬**: 가장 많이 사용된 값 우선 표시
  - **최근 입력값**: 최근에 입력된 값도 포함 (옵션)
  - 예시 대상 필드:
    - Tonearm: effectiveLength (9", 10", 12"), effectiveMass (9g, 12g, 15g)
    - Cartridge: compliance (10, 15, 20, 25), cartridgeWeight (5g, 6g, 7g)
    - SUT: gainDb (20dB, 24dB, 26dB), turnRatio (1:10, 1:20, 1:40)
    - Turntable: platterWeight (1.5kg, 2.0kg, 3.0kg)
  - API 엔드포인트 설계: `GET /api/{component}/field-values/:fieldName`
- [ ] **이미지 관리 UX 플로우 설계**:
  - 시나리오 1: 이미지 파일 업로드
  - 시나리오 2: URL 입력 후 다운로드
  - 시나리오 3: 기존 이미지 미리보기
  - 시나리오 4: 이미지 삭제
  - 시나리오 5: 업로드/다운로드 실패 시 fallback
  - 시나리오 6: 로딩 상태 표시
- [ ] **에러 표시 환경 기준 명확화**:
  - **개발 환경**: `NODE_ENV=development` 또는 `NEXT_PUBLIC_DEBUG=true`
  - **프로덕션 환경**: `NODE_ENV=production`
  - 환경별 에러 메시지 상세도 정의
- [ ] **산출물**: 이미지 UX 플로우 시나리오 문서 (Markdown)

#### 1.3 문서 및 체크리스트 작성
- [x] BACKEND_DATA.md 생성 완료
  - 각 모델별 테이블 형식으로 정리
  - 컬럼명, 타입, 필수여부, 설명, 예시 값
- [ ] **컬럼 매핑표 작성** (Phase 1.1 산출물)
  - 5개 모델별 입력/수정 가능 컬럼 vs 읽기 전용 컬럼 구분
  - UI 컴포넌트 타입 명시
- [ ] **이미지 UX 플로우 시나리오 작성** (Phase 1.2 산출물)
  - 6가지 시나리오별 플로우 상세 문서화
  - 각 시나리오별 예상 동작 및 fallback 정의
- [ ] **QA 테스트 체크리스트 초안 작성**
  - CRUD 기능 테스트 항목
  - 이미지 관리 테스트 항목
  - 에러 처리 테스트 항목 (개발/프로덕션)
  - 자동완성 기능 테스트 항목
- [ ] 작업 우선순위 확정

---

### Phase 2: Turntable Admin 페이지 생성 (1-2일)

**목표**: 누락된 Turntable admin 페이지 완성

#### 2.1 Backend 확인
- [ ] `/api/turntables` 엔드포인트 확인
  - GET, POST, PUT, DELETE 동작 확인
  - TurntableBase 모델 사용 확인
- [ ] Zod schema 확인 (`turntable.schema.ts`)

#### 2.2 Frontend 구현
- [ ] `/app/admin/turntables/page.tsx` 생성
- [ ] TurntableBase 폼 구현:
  - 기본 정보 (brandId, modelName, modelNumber)
  - Drive 스펙 (driveType, motorType, platterMass, platterDiameter)
  - Speed & Accuracy (speeds, wowFlutter, speedAccuracy)
  - Vibration Control (suspensionType, isolationFeet)
  - Dimensions & Weight
  - Images & Documentation
- [ ] 목록 테이블 구현
- [ ] CRUD 기능 구현 (Create, Read, Update, Delete)

#### 2.3 검증
- [ ] 모든 필드 입력 테스트
- [ ] API 연동 테스트
- [ ] 에러 핸들링 테스트

---

### Phase 3: 기존 Admin 페이지 확장 (3-4일)

**목표**: SUT, Cartridge, Tonearm, Phono Preamp admin에 모든 필드 추가

#### 3.1 SUT Admin 확장
**현재**: brandId, modelName, transformerType, turnRatio, gainDb, inputImpedance, imageUrl
**추가 필요**:
- [ ] modelNumber
- [ ] gainRatio (현재 누락)
- [ ] Impedance 섹션:
  - primaryImpedance, secondaryImp
  - inputCapacitance
- [ ] Frequency Response:
  - freqRespLow, freqRespHigh, freqRespTolerance
- [ ] Core & Connections:
  - coreType
  - inputConnectors, outputConnectors (select multiple)
  - channels, balanced
- [ ] Dimensions & Weight:
  - width, depth, height, weight
- [ ] Documentation:
  - specSheetUrl, dataSource, dataSourceUrl

#### 3.2 Cartridge Admin 확장
**현재**: brandId, modelName, cartridgeType, outputVoltage, outputType, outputImpedance, compliance, cartridgeWeight, trackingForceMin/Max, imageUrl
**추가 필요**:
- [ ] modelNumber
- [ ] **Compliance 상세 정보** (신규 - Resonance 계산용):
  - complianceType (enum: dynamic-10hz, dynamic-100hz, static, unknown)
  - complianceDirection (enum: lateral, vertical, both, unspecified)
  - complianceFreq (10Hz/100Hz) - 기존 필드 유지
- [ ] **전기적 특성** (신규 - SUT 매칭용):
  - dcResistance (Float?, Ω)
  - inductance (Float?, mH)
- [ ] **마운팅 및 구조** (신규):
  - mountType (enum: half-inch, p-mount, integrated-spu, sme-integrated, other)
  - bodyMaterial (String?)
  - verticalTrackingAngle (Float?, degrees)
  - mountingHoles (기존 필드)
- [ ] **사용 용도 및 메타데이터** (신규):
  - recommendedUse (enum: stereo, mono, 78rpm, universal)
  - specSourceUrl (String?)
  - notes (String?)
- [ ] Impedance & Loading:
  - loadImpedance, loadCapacitance
- [ ] Tracking:
  - trackingForceRec (recommended)
- [ ] Stylus:
  - stylusType (enum select)
  - cantilevMaterial (enum select)
- [ ] Frequency Response:
  - freqRespLow, freqRespHigh, freqRespTolerance
  - freqResponseRaw (String?, 선택적 - 원본 응답 데이터)
- [ ] Performance:
  - channelSeparation, channelBalance
  - outputCategory (Enum?, 선택적)
- [ ] Dimensions:
  - height, width, depth
- [ ] Replacement:
  - replacementStylus
- [ ] Documentation:
  - specSheetUrl, dataSource, dataSourceUrl

#### 3.3 Tonearm Admin 확장
**현재**: brandId, modelName, armType, effectiveLength, effectiveMass, headshellType, headshellWeight, imageUrl
**추가 필요**:
- [ ] modelNumber
- [ ] Structure & Material:
  - armTubeType, armTubeMaterial
- [ ] Bearing:
  - bearingType, bearingMaterial
- [ ] Adjustments:
  - vtaAdjustable, azimuthAdjust (boolean)
- [ ] Tracking Force:
  - vtfMin, vtfMax, vtfAdjustType
- [ ] Anti-Skating:
  - antiSkateType
- [ ] Dimensions:
  - totalWeight, height
- [ ] Mounting:
  - mountingType
- [ ] Documentation:
  - specSheetUrl, manualUrl, dataSource, dataSourceUrl

#### 3.4 Phono Preamp Admin 확장
**현재**: brandId, modelName, preampType, tubeOrSolid, mmGainDb, mcGainDb, mmInputImpedance, mcInputImpedance, imageUrl
**추가 필요**:
- [ ] modelNumber
- [ ] Support Flags:
  - supportsMM, supportsMC (boolean)
- [ ] MM Input (상세):
  - mmInputCapacitance
- [ ] MC Input (상세):
  - mcInputCapacitance
- [ ] Adjustments:
  - gainAdjustable, gainRange
  - impedanceAdjust, impedanceOptions
  - capacitanceAdjust, capacitanceRange
- [ ] Equalization:
  - equalizationCurve (array select)
- [ ] Performance:
  - freqRespLow, freqRespHigh, thd, snr
- [ ] Connections:
  - inputConnectors, outputConnectors
  - balanced
- [ ] Power:
  - powerSupply, voltage
- [ ] Type:
  - amplifierType (tube/solid-state/hybrid)
- [ ] Dimensions:
  - width, depth, height, weight
- [ ] Documentation:
  - specSheetUrl, dataSource, dataSourceUrl

---

### Phase 4: 이미지 관리 UX 플로우 검증 및 개선 (1일)

**목표**: 이미지 관리 전체 UX 플로우 완전 검증 및 개선

#### 4.1 전체 UX 플로우 시나리오 테스트
- [ ] **시나리오 1: 이미지 파일 업로드**
  - 파일 선택 → 업로드 → 성공 → 미리보기 업데이트
  - 지원 포맷: JPG, PNG, WebP
  - 파일 크기 제한 체크
  - 로딩 상태 표시
- [ ] **시나리오 2: URL 입력 후 다운로드**
  - URL 입력 → Download 클릭 → 서버에서 다운로드 → 성공 → 미리보기 업데이트
  - 유효한 URL 검증
  - 로딩 상태 표시
- [ ] **시나리오 3: 기존 이미지 미리보기**
  - DB에 이미지 URL이 있는 경우 자동 표시
  - 이미지 로드 실패 시 placeholder 표시
- [ ] **시나리오 4: 이미지 삭제**
  - 삭제 버튼 클릭 → 확인 → 미리보기 제거 → DB에서 URL 제거
  - 삭제 후 다시 업로드 가능
- [ ] **시나리오 5: 업로드/다운로드 실패 시 fallback**
  - 파일 업로드 실패: 에러 메시지 표시, 이전 상태 유지
  - URL 다운로드 실패: 에러 메시지 표시, 이전 상태 유지
  - 네트워크 에러 처리
- [ ] **시나리오 6: 로딩 상태 표시**
  - 업로드 중: 프로그레스 바 또는 스피너
  - 다운로드 중: 스피너
  - 로딩 중 UI 비활성화

#### 4.2 ImageUpload 컴포넌트 개선
- [ ] 미리보기 크기 조정 및 레이아웃 개선
- [ ] 로딩 인디케이터 추가 (업로드/다운로드)
- [ ] 에러 메시지 개선 (환경별 분기)
- [ ] 삭제 기능 추가 (이미지 URL 제거)
- [ ] 드래그 앤 드롭 지원 (선택 사항)

#### 4.3 검증 및 문서화
- [ ] 모든 admin 페이지에 적용되었는지 확인
- [ ] 6가지 시나리오 QA 테스트 완료
- [ ] 발견된 이슈 목록 작성 및 수정
- [ ] **산출물**: 이미지 UX 플로우 테스트 결과 문서

---

### Phase 5: 에러 표시 개선 및 환경 기준 명확화 (1일)

**목표**: 개발/프로덕션 환경별 에러 표시 전략 구현 및 기준 명확화

#### 5.1 환경 기준 정의 및 문서화
- [ ] **개발 환경 기준**:
  - `NODE_ENV=development` (Backend)
  - `NEXT_PUBLIC_DEBUG=true` (Frontend, 선택 사항)
  - 또는 `process.env.NODE_ENV === 'development'`
- [ ] **프로덕션 환경 기준**:
  - `NODE_ENV=production` (Backend)
  - `NEXT_PUBLIC_DEBUG=false` 또는 미설정 (Frontend)
- [ ] 환경 변수 문서화 (.env.example 업데이트)

#### 5.2 Backend 에러 응답 개선
- [ ] **개발 환경** (`NODE_ENV=development`):
  - Validation 에러: Zod 상세 에러 메시지 전체 전달
  - Server 에러: 스택 트레이스 포함
  - Database 에러: Prisma 에러 코드 및 상세 정보
- [ ] **프로덕션 환경** (`NODE_ENV=production`):
  - Validation 에러: 간결한 메시지
  - Server 에러: 일반적인 에러 메시지 (스택 트레이스 숨김)
  - Database 에러: 사용자 친화적 메시지
- [ ] 에러 응답 형식 표준화:
  ```typescript
  {
    success: false,
    error: {
      message: string,
      code: string,
      details?: any  // 개발 환경에서만
    }
  }
  ```

#### 5.3 Frontend 에러 표시
- [ ] API 클라이언트 (`lib/api.ts`) 개선:
  - 에러 응답 타입 정의
  - 환경 감지 로직 추가
  - 개발 환경: 에러 상세 정보를 toast 또는 modal로 표시
  - 프로덕션: 간결한 에러 메시지만 표시
- [ ] 에러 표시 컴포넌트 구현:
  - 개발: 접을 수 있는 에러 상세 정보 (JSON viewer)
  - 프로덕션: 심플한 토스트 알림
- [ ] 환경별 에러 메시지 예시 작성

#### 5.4 에러 로깅
- [ ] 개발: Console에 상세 로그 (`console.log`, `console.error`)
- [ ] 프로덕션: 에러만 `console.error` (추후 Sentry 등 도입 준비)

#### 5.5 문서화 및 테스트
- [ ] **산출물**: 에러 처리 가이드 문서 (환경별 분기 로직)
- [ ] 개발/프로덕션 환경별 에러 표시 테스트
- [ ] QA 체크리스트에 에러 시나리오 추가

---

### Phase 6: 문서 정리 및 산출물 통합 (0.5일)

**목표**: 모든 산출물 정리 및 최종 검토

#### 6.1 데이터베이스 컬럼 명세
- [x] BACKEND_DATA.md 생성 완료
  - 각 모델별 테이블 형식으로 정리
  - 컬럼명, 타입, 필수 여부, 설명, 예시 값
  - Enum 값 참조 섹션

#### 6.2 산출물 통합 및 검토
- [ ] Phase 1 산출물 검토:
  - 컬럼 매핑표 (5개 모델)
  - 이미지 UX 플로우 시나리오
  - QA 테스트 체크리스트 초안
- [ ] Phase 4 산출물 검토:
  - 이미지 UX 플로우 테스트 결과
- [ ] Phase 5 산출물 검토:
  - 에러 처리 가이드 문서
- [ ] 모든 문서 최종 업데이트:
  - BACKEND_DATA.md
  - BACKEND_API.md (필요 시)
  - FRONTEND_STRUCTURE.md (새 컴포넌트 추가 시)

#### 6.3 Sprint 문서 정리
- [ ] ORDER121701.md 작업 결과 섹션 작성
- [ ] 변경된 파일 목록 정리
- [ ] 이슈/문제점 정리

---

### Phase 7: QA 테스트 및 최종 검증 (1-2일)

**목표**: 전체 기능 QA 테스트, 버그 수정, 산출물 검증

#### 7.1 CRUD 기능 테스트 (QA 체크리스트 기반)
- [ ] **각 admin 페이지별 CRUD 테스트** (5개 모델):
  - Create: 모든 "입력/수정 가능 컬럼" 입력 가능한지 (컬럼 매핑표 기반)
  - Read: 목록 및 상세 정보 표시 확인
  - Update: 기존 데이터 수정 가능한지
  - Delete: 삭제 기능 동작 확인
  - 읽기 전용 필드 수정 불가 확인
- [ ] **수치 입력 자동완성 테스트**:
  - 드롭다운에 빈도순 값 표시 확인
  - 직접 입력 가능 확인
  - 자동완성 대상 필드 모두 동작 확인

#### 7.2 이미지 관리 UX 플로우 테스트 (6가지 시나리오)
- [ ] 시나리오 1: 파일 업로드 → 성공 → 미리보기
- [ ] 시나리오 2: URL 다운로드 → 성공 → 미리보기
- [ ] 시나리오 3: 기존 이미지 미리보기
- [ ] 시나리오 4: 이미지 삭제 → 재업로드
- [ ] 시나리오 5: 실패 시 fallback (에러 메시지 표시)
- [ ] 시나리오 6: 로딩 상태 표시 (스피너/프로그레스)

#### 7.3 에러 표시 테스트 (환경별)
- [ ] **개발 환경** (`NODE_ENV=development`):
  - Validation 에러: 상세 에러 표시 (JSON viewer)
  - Server 에러: 스택 트레이스 표시
  - 에러 로그 console 확인
- [ ] **프로덕션 빌드** (`NODE_ENV=production`):
  - Validation 에러: 간소화된 메시지
  - Server 에러: 일반 메시지 (스택 트레이스 숨김)
  - console.error만 출력
- [ ] Validation 시나리오 테스트:
  - 필수 필드 누락
  - 잘못된 타입 입력
  - 중복 데이터 입력

#### 7.4 산출물 검증
- [ ] **컬럼 매핑표**: 모든 컬럼이 실제 구현과 일치하는지
- [ ] **이미지 UX 플로우 시나리오**: 모든 시나리오 동작 확인
- [ ] **에러 처리 가이드**: 환경별 분기 로직 정확한지
- [ ] **QA 테스트 체크리스트**: 모든 항목 테스트 완료

#### 7.5 문서 최종 검증
- [ ] BACKEND_DATA.md: 내용 정확성, 누락 컬럼 없는지
- [ ] 컬럼 매핑표: UI와 일치하는지
- [ ] 변경 사항 문서화 (ORDER121701.md 작업 결과)

#### 7.6 버그 수정 및 재테스트
- [ ] 발견된 버그 목록 작성
- [ ] 버그 수정
- [ ] 수정 사항 재테스트

---

## ✅ 구현 체크리스트

### Phase 1: 분석 및 설계
- [ ] 컬럼 관리 범위 분류 (입력/수정 가능 vs 읽기 전용)
- [ ] 컬럼 매핑표 작성 (5개 모델)
- [ ] 이미지 UX 플로우 시나리오 작성
- [ ] QA 테스트 체크리스트 초안 작성
- [ ] 환경 기준 명확화 (NODE_ENV 기반)

### Backend
- [ ] **Cartridge Prisma Schema 업데이트** (신규):
  - 10개 신규 필드 추가 (complianceType, complianceDirection, dcResistance, inductance, mountType, bodyMaterial, verticalTrackingAngle, recommendedUse, specSourceUrl, notes)
  - 4개 Enum 타입 정의 (ComplianceType, ComplianceDirection, MountType, RecommendedUse)
  - 선택적 필드 추가 (freqResponseRaw, outputCategory)
  - Prisma migration 생성 및 실행
- [ ] **Cartridge Zod Schema 업데이트**:
  - 신규 필드에 대한 validation 규칙 추가
  - Enum 값 검증
- [ ] Turntable API 엔드포인트 확인
- [ ] 모든 Zod schema 검증 (필드 누락 없는지, 컬럼 매핑표 기준)
- [ ] **수치 입력 자동완성 API** 구현:
  - `GET /api/{component}/field-values/:fieldName`
  - DB에서 DISTINCT 값 추출, 빈도순 정렬
- [ ] 에러 처리 미들웨어 개선 (개발/프로덕션 분기)
- [ ] 에러 응답 형식 표준화
- [ ] 환경 변수 설정 (.env.example 업데이트)

### Frontend
- [ ] **Turntable Admin 페이지 신규 생성** (최우선)
- [ ] SUT Admin 페이지 확장 (20개+ 필드 추가)
- [ ] Cartridge Admin 페이지 확장 (15개+ 필드 추가)
- [ ] Tonearm Admin 페이지 확장 (12개+ 필드 추가)
- [ ] Phono Preamp Admin 페이지 확장 (15개+ 필드 추가)
- [ ] **수치 입력 Combobox 컴포넌트** 구현 (react-select):
  - 자동완성 값 표시 + 직접 입력 지원
  - 빈도순 정렬 적용
- [ ] ImageUpload 컴포넌트 개선:
  - 6가지 시나리오 모두 지원
  - 삭제 기능 추가
  - 로딩 상태 표시
- [ ] 에러 표시 컴포넌트 구현:
  - 개발: JSON viewer
  - 프로덕션: 토스트 알림
- [ ] 폼 UI/UX 개선 (섹션 그룹화 - 아코디언 방식)

### 문서 및 산출물
- [x] BACKEND_DATA.md 생성 완료
- [ ] **BACKEND_DATA.md Cartridge 섹션 업데이트**:
  - 10개 신규 필드 추가 및 설명
  - Enum 값 목록 추가
  - 필드 그룹화 (Compliance 상세, 전기적 특성, 마운팅/구조)
- [ ] **컬럼 매핑표 작성 (5개 모델)**:
  - Cartridge 모델에 10개 신규 필드 포함
  - 신규 필드 UI 컴포넌트 타입 정의 (Select for Enum, Number for Float)
- [ ] 이미지 UX 플로우 시나리오 문서
- [ ] 에러 처리 가이드 문서
- [ ] QA 테스트 체크리스트
- [ ] BACKEND_API.md 업데이트 (새 API 엔드포인트)
- [ ] TODO.md 업데이트 (완료된 항목 제거)
- [ ] ORDER121701.md 작업 결과 작성

### 테스트 및 검증
- [ ] 모든 CRUD 기능 테스트 (컬럼 매핑표 기반)
- [ ] 수치 입력 자동완성 테스트
- [ ] 이미지 UX 플로우 테스트 (6가지 시나리오)
- [ ] 에러 핸들링 테스트 (개발/프로덕션 환경)
- [ ] 산출물 검증 (매핑표, 시나리오, 가이드)
- [ ] 버그 수정 및 재테스트

---

## 🧪 테스트 시나리오

### 시나리오 1: Turntable 생성
1. `/admin/turntables` 접속
2. "Add New Turntable" 버튼 클릭
3. 모든 필수 필드 입력:
   - Brand 선택
   - Model Name 입력
   - Drive Type 선택
   - 기타 스펙 입력
4. 이미지 URL 입력 또는 파일 업로드
5. "Create" 버튼 클릭
6. **예상 결과**: 성공 토스트, 목록에 새 항목 추가

### 시나리오 2: Cartridge 수정 (모든 필드)
1. `/admin/cartridges` 접속
2. 기존 카트리지 "Edit" 버튼 클릭
3. 모든 섹션의 필드 수정:
   - 기본 정보
   - Output & Impedance
   - Compliance
   - Stylus & Cantilever
   - Frequency Response
   - Dimensions
4. 이미지 변경 (URL 또는 Upload)
5. "Update" 버튼 클릭
6. **예상 결과**: 성공 토스트, 변경 사항 반영

### 시나리오 3: Validation 에러 (개발 환경)
1. `/admin/suts` 접속
2. "Add New SUT" 클릭
3. Brand만 선택하고 Model Name 비워둠
4. "Create" 클릭
5. **예상 결과 (개발)**:
   - 상세 에러 메시지:
     ```
     Validation Error:
     - modelName: Required field is missing
     ```
   - Zod 에러 객체 전체 표시 (접을 수 있는 형태)

### 시나리오 4: Validation 에러 (프로덕션 환경)
1. 동일한 시나리오 3 실행
2. **예상 결과 (프로덕션)**:
   - 간소화된 메시지:
     ```
     Failed to create SUT: Invalid input data
     ```
   - 에러 상세 정보 숨김

### 시나리오 5: 이미지 업로드
1. 아무 admin 페이지 접속
2. Edit 모드에서 이미지 섹션 확인
3. 기존 이미지가 있으면 미리보기 표시 확인
4. "Upload File" 탭:
   - 이미지 파일 선택 (JPG/PNG)
   - 업로드 진행 상태 표시
   - 성공 시 미리보기 업데이트
5. "URL Download" 탭:
   - 외부 이미지 URL 입력
   - "Download" 클릭
   - 성공 시 미리보기 업데이트
6. **예상 결과**: 두 방법 모두 정상 동작, 이미지 저장

---

## 🤔 검토 필요 사항

### 1. 폼 UI/UX 디자인

**질문**: 각 모델당 30-40개 필드를 어떻게 표시할 것인가?

**옵션 A: 탭 (Tabs)**
```
[ 기본 정보 | 기술 스펙 | 물리적 특성 | 이미지 & 문서 ]
```
- 장점: 깔끔한 UI, 섹션 분리 명확
- 단점: 모든 섹션을 저장할 때까지 데이터가 분산

**옵션 B: 아코디언 (Accordion)**
```
▼ 기본 정보 (항상 열림)
▶ 기술 스펙 (접을 수 있음)
▶ 물리적 특성
▶ 이미지 & 문서
```
- 장점: 한 페이지에서 모든 데이터 확인 가능
- 단점: 페이지가 길어질 수 있음

**옵션 C: 멀티 스텝 폼**
```
Step 1: 기본 정보 → Next
Step 2: 기술 스펙 → Next
Step 3: 물리적 특성 → Next
Step 4: 이미지 & 문서 → Submit
```
- 장점: 단계별 입력, 집중도 높음
- 단점: 여러 단계 거쳐야 함

**추천**: 옵션 B (아코디언) - 한 페이지에서 모든 데이터 확인하면서 필요한 섹션만 펼치기

---

### 2. 필수 vs 선택 필드 표시

**질문**: Prisma schema에서 일부 필드는 required, 일부는 optional인데 UI에서 어떻게 구분할 것인가?

**옵션 A**: 필수 필드에 빨간 별표 (*)
**옵션 B**: 선택 필드에 "(Optional)" 텍스트
**옵션 C**: 필수/선택 구분 없이 모두 동일하게 표시

**추천**: 옵션 A (빨간 별표) - 표준 UI 패턴

---

### 3. Array/JSON 필드 입력 방법

**질문**: `speeds`, `inputConnectors`, `outputConnectors`, `equalizationCurve` 같은 array 필드를 어떻게 입력받을 것인가?

**옵션 A**: Multi-select 드롭다운 (react-select)
```
[v] 33.33
[v] 45
[ ] 78
```

**옵션 B**: Checkbox 그룹
```
☑ 33.33
☑ 45
☐ 78
```

**옵션 C**: Comma-separated 텍스트 입력
```
["33.33", "45"]
```

**추천**:
- Enum 기반 필드 (speeds, connectors): 옵션 A (Multi-select)
- 자유 입력 필드: 옵션 C (JSON 텍스트)

---

### 4. 에러 표시 상세 수준

**질문**: 개발 환경에서 에러를 얼마나 상세하게 표시할 것인가?

**옵션 A**: Zod 에러 객체 전체를 JSON viewer로 표시
**옵션 B**: 필드별 에러 메시지만 표시
**옵션 C**: 에러 메시지 + 스택 트레이스

**추천**: 옵션 A (JSON viewer) - 개발자가 디버깅하기 쉬움

---

### 5. Turntable vs TurntableBase 용어

**질문**: Prisma schema에서 `TurntableBase`인데 UI에서 어떻게 표시할 것인가?

**옵션 A**: "Turntable Base" (정확한 용어)
**옵션 B**: "Turntable" (사용자 친화적)

**추천**: 옵션 B (Turntable) - 일반 사용자에게 친숙

---

### 6. 수치 입력 필드 자동완성 시스템

**질문**: 숫자 필드 입력 시 기존 데이터를 활용한 자동완성을 어떻게 구현할 것인가?

**배경**: 많은 제품들이 비슷한 수치를 사용 (예: 톤암 9"/12", 카트리지 compliance 10/15/20)

**옵션 A: Combobox (드롭다운 + 자유 입력)**
```jsx
<Combobox>
  <option>9"</option>  {/* 기존 DB에서 추출 */}
  <option>10"</option>
  <option>12"</option>
  <input type="text" /> {/* 직접 입력도 가능 */}
</Combobox>
```
- 장점: 빠른 입력 + 유연성
- 단점: 컴포넌트 구현 필요 (react-select 또는 커스텀)

**옵션 B: Datalist (HTML5 native)**
```jsx
<input list="effectiveLength-suggestions" type="text" />
<datalist id="effectiveLength-suggestions">
  <option value="9" />
  <option value="10" />
  <option value="12" />
</datalist>
```
- 장점: 간단한 구현, 네이티브 기능
- 단점: 스타일링 제한적

**옵션 C: 드롭다운 + "기타" 옵션**
```jsx
<select>
  <option>9"</option>
  <option>10"</option>
  <option>12"</option>
  <option>기타...</option>
</select>
{showCustomInput && <input type="text" />}
```
- 장점: 명확한 UI
- 단점: 2단계 입력 (선택 → 입력)

**추천**: 옵션 A (Combobox with react-select) - 최고의 UX, 통일된 디자인

**구현 세부사항**:
1. **Backend API**:
   - `GET /api/tonearms/field-values/effectiveLength` → `[9, 10, 12, ...]`
   - DB에서 `DISTINCT` 값 추출, 빈도순 정렬
   - 상위 10개만 반환 (너무 많으면 오히려 혼란)

2. **Frontend 캐싱**:
   - SWR로 필드별 값 캐싱
   - 한번 로드하면 재사용

3. **적용 대상 필드** (예시):
   - **Tonearm**: effectiveLength, effectiveMass, headshellWeight, vtfMin, vtfMax
   - **Cartridge**: compliance, cartridgeWeight, trackingForceMin/Max, outputVoltage
   - **SUT**: gainDb, turnRatio, primaryImpedance
   - **Turntable**: platterWeight, platterDiameter, wowFlutter

4. **Fallback**:
   - DB에 데이터 없으면 일반 텍스트 입력으로 표시
   - 최소 3개 이상의 distinct 값이 있을 때만 드롭다운 표시

---

## 📊 예상 작업 시간

| Phase | 작업 내용 | 예상 시간 | 주요 산출물 |
|-------|----------|----------|-----------|
| Phase 1 | 현황 분석 및 설계 | 1일 | 컬럼 매핑표, 이미지 UX 시나리오, QA 체크리스트 초안 |
| Phase 2 | Turntable Admin 생성 | 1-2일 | Turntable Admin 페이지 |
| Phase 3 | 기존 Admin 확장 (4개) | 3-4일 | 확장된 Admin 페이지 (SUT, Cartridge, Tonearm, Phono Preamp) |
| Phase 4 | 이미지 UX 플로우 검증 | **1일** | 이미지 UX 플로우 테스트 결과 문서 |
| Phase 5 | 에러 표시 개선 | 1일 | 에러 처리 가이드 문서 |
| Phase 6 | 문서 정리 및 산출물 통합 | 0.5일 | 통합된 모든 산출물 |
| Phase 7 | QA 테스트 및 최종 검증 | **1-2일** | QA 테스트 완료, 버그 수정 |
| **합계** | | **9-12일** | 7개 주요 산출물 |

**변경 사항**:
- Phase 4: 0.5일 → 1일 (6가지 시나리오 전체 검증 추가)
- Phase 7: 1일 → 1-2일 (산출물 검증 및 버그 수정 추가)
- 총 예상 시간: 8-10일 → 9-12일

---

## 📋 산출물 체크리스트

이번 Sprint에서 생성될 모든 산출물 목록:

### Phase 1 산출물
- [ ] **컬럼 매핑표** (5개 모델: Turntable, Tonearm, Cartridge, SUT, Phono Preamp)
  - 각 모델별 Markdown 표
  - 컬럼명 | 타입 | 관리범위 (입력/수정/읽기전용) | UI 컴포넌트 | 비고
- [ ] **이미지 UX 플로우 시나리오 문서**
  - 6가지 시나리오 상세 문서화
  - 각 시나리오별 예상 동작, fallback, 에러 처리
- [ ] **QA 테스트 체크리스트 초안**
  - CRUD 테스트 항목
  - 이미지 관리 테스트 항목
  - 에러 처리 테스트 항목
  - 자동완성 기능 테스트 항목

### Phase 4 산출물
- [ ] **이미지 UX 플로우 테스트 결과 문서**
  - 6가지 시나리오 테스트 결과
  - 발견된 이슈 및 수정 사항

### Phase 5 산출물
- [ ] **에러 처리 가이드 문서**
  - 환경별 분기 로직 (NODE_ENV 기반)
  - 에러 응답 형식 표준
  - 환경별 에러 메시지 예시

### Phase 6 산출물
- [ ] **통합 문서 업데이트**
  - BACKEND_DATA.md (이미 완료)
  - BACKEND_API.md (새 API 엔드포인트)
  - ORDER121701.md 작업 결과 섹션

### Phase 7 산출물
- [ ] **QA 테스트 최종 체크리스트**
  - 모든 테스트 항목 완료 확인
  - 발견된 버그 및 수정 사항 목록

---

## 📝 리뷰 반영 요약

사용자 리뷰를 반영하여 다음 항목들을 ORDER 파일에 추가/개선했습니다:

### 1. ✅ 요구사항 명확성 및 범위
- **반영**: 컬럼 관리 범위 분류 추가 (입력/수정 가능 vs 읽기 전용 vs 자동 관리)
- **산출물**: 컬럼 매핑표 (Phase 1.1)

### 2. ✅ 데이터 명세와 싱크
- **반영**: BACKEND_DATA.md 기반 컬럼 매핑표 작성
- **산출물**: 5개 모델별 컬럼 매핑표

### 3. ✅ 이미지 관리
- **반영**: 전체 UX 플로우 6가지 시나리오 상세화
- **산출물**: 이미지 UX 플로우 시나리오 문서 + 테스트 결과 문서
- **Phase 4 시간**: 0.5일 → 1일

### 4. ✅ 에러 처리
- **반영**: 환경 기준 명확화 (NODE_ENV=development/production)
- **산출물**: 에러 처리 가이드 문서
- **추가**: 환경 변수 문서화 (.env.example)

### 5. ✅ 입력 UX 개선
- **반영**: 빈도순 정렬 + 최근 입력값 옵션 추가
- **구현**: Combobox 컴포넌트 (react-select) 권장

### 6. ✅ Turntable Admin 부재
- **반영**: 최우선 순위로 명시, Phase 2로 독립

### 7. ✅ 전체적인 Task 관리
- **반영**: 각 Phase별 산출물 명시
- **추가**: 산출물 체크리스트 섹션 신설
- **Phase 7 시간**: 1일 → 1-2일 (산출물 검증 추가)

### 8. ✅ Cartridge 스키마 개선 (2025-12-17 추가)
- **반영**: Resonance 계산 및 SUT 매칭용 10개 신규 필드 추가
- **Phase 1.1**: Cartridge 스키마 업데이트 작업 추가
- **Phase 3.2**: Cartridge Admin 확장 항목에 신규 필드 포함
- **Backend 체크리스트**: Prisma Schema 및 Zod Schema 업데이트 항목 추가
- **문서 체크리스트**: BACKEND_DATA.md 및 컬럼 매핑표 업데이트 항목 추가

---

## ✅ 작업 결과

**작업 기간**: 2025-12-17 ~ 2025-12-18
**Phase 완료**: 5/7 (Phase 1-5 완료)
**전체 진행률**: 71%

### 주요 성과

#### 1. Admin 페이지 전면 확장 완료
- **Turntable Admin** 신규 생성 (700+ lines)
- **SUT Admin** 확장: 6개 → 26개 필드 (790+ lines)
- **Cartridge Admin** 확장: 10개 → 22개 필드 (750+ lines)
- **Tonearm Admin** 확장: 7개 → 25개 필드 (830+ lines)
- **Phono Preamp Admin** 확장: 8개 → 35개 필드 (993 lines)
- **총 필드 수**: 31개 → 108개 (**+77개 신규 필드**)
- **총 코드량**: ~4,000 lines

#### 2. 문서화 완료
- **BACKEND_DATA.md**: 9개 모델 완전 문서화 (36K)
- **COLUMN_MAPPING.md**: 5개 모델 컬럼 매핑 (335 lines)
- **IMAGE_UX_FLOW.md**: 6가지 시나리오 완전 문서화 (600+ lines)
- **ERROR_HANDLING_GUIDE.md**: 환경별 에러 처리 가이드 (550+ lines)
- **QA_TEST_CHECKLIST.md**: 포괄적 QA 체크리스트 (424 lines)

#### 3. 기능 개선
- **ImageUpload 컴포넌트** 개선 (에러 처리 + 접근성)
- **Error Middleware** 구현 (6가지 에러 타입 통합 처리)
- **환경별 에러 표시** (Development: 상세, Production: 간결)

#### 4. 스키마 개선
- **Cartridge 스키마** 12개 신규 필드 추가
- Prisma Schema & Zod Schema 업데이트
- Database Migration 완료

### 변경된 파일 목록

#### Backend (12개 파일)
1. `prisma/schema.prisma` - Cartridge 모델 12개 필드 추가
2. `src/schemas/cartridge.schema.ts` - Zod schema 12개 필드 + 4개 Enum 추가
3. `src/middleware/error.middleware.ts` - **신규 생성** (220+ lines)
4. `src/index.ts` - Error middleware 적용
5. `.env.example` - Error handling 섹션 추가

#### Frontend (7개 파일)
1. `app/admin/turntables/page.tsx` - **신규 생성** (700+ lines)
2. `app/admin/cartridges/page.tsx` - 완전 재작성 (750+ lines, 10→22 필드)
3. `app/admin/suts/page.tsx` - 완전 재작성 (790+ lines, 6→26 필드)
4. `app/admin/tonearms/page.tsx` - 완전 재작성 (830+ lines, 7→25 필드)
5. `app/admin/phono-preamps/page.tsx` - 완전 재작성 (993 lines, 8→35 필드)
6. `components/admin/ImageUpload.tsx` - 개선 (에러 처리, 접근성)
7. `lib/api.ts` - Response interceptor 개선 (환경별 로깅)
8. `.env.example` - **신규 생성** (환경 변수 문서)

#### Documentation (5개 파일)
1. `docs/BACKEND_DATA.md` - Cartridge 섹션 완전 개편 (9개 서브섹션)
2. `docs/current_sprint/COLUMN_MAPPING.md` - Cartridge 12개 필드 추가
3. `docs/IMAGE_UX_FLOW.md` - **신규 생성** (600+ lines)
4. `docs/ERROR_HANDLING_GUIDE.md` - **신규 생성** (550+ lines)
5. `docs/current_sprint/ORDER121701.md` - 진행 상황 업데이트

#### Work Log
1. `orders/order-20251217.md` - **신규 생성** (900+ lines)
   - Phase 1.1-1.2 완료 로그
   - Phase 2 완료 로그
   - Phase 3.1-3.4 완료 로그
   - Phase 3 전체 요약
   - Phase 4 완료 로그
   - Phase 5 완료 로그

**총 변경 파일 수**: 25개 (신규 생성 7개, 수정 18개)

### 핵심 기능 완성도
- ✅ Resonance 계산용 데이터 (Cartridge compliance + Tonearm effective mass)
- ✅ SUT 매칭용 데이터 (Cartridge dcResistance/inductance + SUT impedance)
- ✅ Phono Preamp 매칭용 데이터 (Cartridge output + MM/MC support)
- ✅ 완전한 데이터 관리 (모든 Admin 페이지가 전체 스펙 관리 가능)

### 남은 작업
- **Phase 6**: 문서 정리 및 통합 (80% 완료)
- **Phase 7**: QA 테스트 및 최종 검증

---

## 🚀 다음 단계

**현재 상태**: Phase 6 진행 중 (80% 완료)

**리뷰 필요 사항**:
1. 폼 UI/UX 디자인 방향 결정 (탭 vs 아코디언 vs 멀티 스텝) - 추천: 아코디언
2. Array 필드 입력 방법 확정 (Multi-select vs Checkbox vs JSON) - 추천: Multi-select
3. 에러 표시 상세 수준 결정 (JSON viewer vs 메시지만 vs 스택 트레이스) - 추천: JSON viewer
4. **수치 입력 필드 자동완성 방식** (Combobox vs Datalist vs 드롭다운+기타) - 추천: Combobox
5. 컬럼 매핑 범위 최종 확인 (입력/수정 가능 vs 읽기 전용)
6. 우선순위 조정 (필요 시)

**사용자 피드백 후**:
- 최종 요구사항 정리
- Phase 1부터 순차적으로 작업 시작
- 각 Phase 완료 시 산출물 리뷰 및 피드백

---

## 📝 메모

### 기존 이슈
- 현재 SUT admin에서 발생하는 400 에러는 이번 Sprint에서 함께 해결 예정 (payload cleanup 이미 적용)

### 완료된 사항
- ✅ BACKEND_DATA.md 생성 완료 (2025-12-17) - 참고 자료로 활용
- ✅ 수치 입력 자동완성 요구사항 반영 완료
- ✅ 사용자 리뷰 반영 완료 (7개 주요 피드백)

### 주요 변경 사항
- 이미지 업로드 기능: "검증만" → "전체 UX 플로우 검증 및 개선"
- 산출물: 문서 업데이트만 → 7개 주요 산출물 (컬럼 매핑표, UX 시나리오, 가이드 등)
- 예상 시간: 8-10일 → 9-12일 (품질 보장 위한 시간 추가)

### 다음 액션
1. 사용자 리뷰 및 피드백 대기 (리뷰 필요 사항 6개)
2. 최종 요구사항 확정
3. Phase 1 작업 시작 (컬럼 매핑표 작성부터)

---

## 🐛 진행 중 이슈 (Issues Tracker)

> 💡 **사용법**: 작업 진행 중 발견되는 예상 외 이슈를 여기에 기록하고 관리합니다.

### 미해결 이슈

_현재 미해결 이슈 없음_

<!--
이슈 템플릿:
#### [이슈 #1] 이슈 제목
- **발견일**: 2025-12-XX
- **Phase**: Phase X
- **심각도**: High / Medium / Low
- **설명**:
- **영향 범위**:
- **해결 방법**:
- **상태**: 🔴 미해결 / 🟡 진행 중 / 🟢 해결됨
-->

### 해결된 이슈

_아직 없음_

---

## ✅ 완료된 Phase

> 💡 **사용법**: Phase 완료 시 이 섹션으로 이동합니다. 완료일, 주요 산출물, 소요 시간을 기록합니다.

_아직 완료된 Phase 없음 - Planning 단계_

<!--
Phase 완료 템플릿:
### ✅ Phase X: [Phase 이름] (완료)
- **완료일**: 2025-12-XX
- **실제 소요 시간**: X일
- **주요 산출물**:
  - 산출물 1
  - 산출물 2
- **주요 변경 사항**:
- **발견된 이슈**:
- **다음 Phase 준비 사항**:
-->

---

**작업 시작 대기 중** - 사용자 리뷰 및 승인 후 Phase 1부터 진행

---

## 📚 참고 문서

- [DOCORDER.md](../DOCORDER.md) - AI Agent용 문서 관리 규칙
- [DOCOPERATION.md](../DOCOPERATION.md) - 사람용 문서 운영 가이드
- [BACKEND_DATA.md](../BACKEND_DATA.md) - 데이터베이스 구조 상세 문서
- [BACKEND_API.md](../BACKEND_API.md) - Backend API 명세
- [FRONTEND_STRUCTURE.md](../FRONTEND_STRUCTURE.md) - Frontend 구조
- [ARCHITECTURE.md](../ARCHITECTURE.md) - 시스템 아키텍처
