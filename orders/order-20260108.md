# ì‘ì—… ë¡œê·¸: ë°±ì—”ë“œ ë¡œê·¸ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„

**ì‘ì—…ì¼**: 2026-01-08 21:00 ~ 21:10 (KST)
**ì‘ì—…ì**: Claude Code
**ìš°ì„ ìˆœìœ„**: Medium
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## ğŸ“ ì‚¬ìš©ì ìš”ì²­

> ë°±ì—”ë“œ ë¡œê·¸ì˜ ê²½ìš° ì‹œê°„ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ê³ , ì¼ì£¼ì¼ê¹Œì§€ë§Œ ì €ì¥í•˜ê²Œ í•´ ì¤˜.

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

1. ë¡œê·¸ë¥¼ ì‹œê°„(Hour) ë‹¨ìœ„ë¡œ ìë™ ë¶„ë¦¬
2. ë¡œê·¸ íŒŒì¼ì„ ìµœëŒ€ 7ì¼ê°„ë§Œ ë³´ê´€ (ìë™ ì‚­ì œ)
3. êµ¬ì¡°í™”ëœ ë¡œê·¸ í˜•ì‹ (JSON)
4. HTTP ìš”ì²­ ë¡œê¹… í†µí•©

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. Winston ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
```bash
npm install winston winston-daily-rotate-file morgan @types/morgan
```

**ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€**:
- `winston` - êµ¬ì¡°í™”ëœ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬
- `winston-daily-rotate-file` - ë¡œê·¸ íŒŒì¼ ìë™ ë¡œí…Œì´ì…˜
- `morgan` - HTTP ìš”ì²­ ë¡œê±°
- `@types/morgan` - Morgan TypeScript íƒ€ì… ì •ì˜

### 2. ë¡œê±° ì„¤ì • íŒŒì¼ ìƒì„±

**íŒŒì¼**: `src/config/logger.ts`

**ì£¼ìš” ê¸°ëŠ¥**:
- **ë¡œê·¸ ë ˆë²¨**:
  - Development: `debug` (ëª¨ë“  ë¡œê·¸)
  - Production: `info` (info, warn, errorë§Œ)
- **ë¡œê·¸ í˜•ì‹**: JSON (êµ¬ì¡°í™”ëœ ë°ì´í„°)
- **ì¶œë ¥**:
  - íŒŒì¼: JSON í˜•ì‹
  - ì½˜ì†” (Development only): ì»¬ëŸ¬í™”ëœ í¬ë§·

**ë¡œê·¸ íŒŒì¼ ì„¤ì •**:
```typescript
// ëª¨ë“  ë¡œê·¸
filename: 'logs/application-YYYY-MM-DD-HH.log'
datePattern: 'YYYY-MM-DD-HH'  // ì‹œê°„ ë‹¨ìœ„
maxFiles: '7d'                 // 7ì¼ ë³´ê´€
maxSize: '20m'                 // íŒŒì¼ë‹¹ ìµœëŒ€ 20MB
zippedArchive: true            // êµ¬ íŒŒì¼ ì••ì¶•

// ì—ëŸ¬ ë¡œê·¸ë§Œ
filename: 'logs/error-YYYY-MM-DD-HH.log'
level: 'error'
```

### 3. ë°±ì—”ë“œ ë©”ì¸ íŒŒì¼ ì—…ë°ì´íŠ¸

**íŒŒì¼**: `src/index.ts`

**ë³€ê²½ ì‚¬í•­**:
1. âœ… Winston ë¡œê±° import
2. âœ… Morgan HTTP ë¡œê±° ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€
3. âœ… `console.log()` â†’ `logger.info()` ë³€ê²½
4. âœ… HTTP ìš”ì²­ ìë™ ë¡œê¹… ì„¤ì •

**Morgan ì„¤ì •**:
- Development: `dev` í¬ë§· (ì»¬ëŸ¬í™”, ê°„ê²°)
- Production: `combined` í¬ë§· (Apache ìŠ¤íƒ€ì¼, ìƒì„¸)

### 4. .gitignore ì—…ë°ì´íŠ¸

```gitignore
# Logs
/logs/*
!/logs/.gitkeep
```

ë¡œê·¸ íŒŒì¼ì€ Gitì—ì„œ ì œì™¸í•˜ë˜, `logs/` ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” ìœ ì§€

### 5. logs ë””ë ‰í† ë¦¬ ìƒì„±

```bash
mkdir -p logs
touch logs/.gitkeep
```

### 6. README.md ì—…ë°ì´íŠ¸

**ì¶”ê°€ëœ ì„¹ì…˜**:
- âœ… Tech Stackì— "Logging: Winston + Morgan" ì¶”ê°€
- âœ… ìƒˆë¡œìš´ "Logging" ì„¹ì…˜ ì¶”ê°€:
  - Log Files ì„¤ëª…
  - Log Retention ì •ì±…
  - Log Levels (ê°œë°œ/í”„ë¡œë•ì…˜)
  - Log Format ì˜ˆì‹œ
  - Viewing Logs ëª…ë ¹ì–´
- âœ… Project Structureì— `logs/` í´ë” ì¶”ê°€

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ë¡œê·¸ íŒŒì¼ ìƒì„± í™•ì¸

```bash
$ ls -lh logs/
-rw-r--r--  1 alex  staff   878B  1æœˆ  8 21:07 application-2026-01-08-21.log
-rw-r--r--  1 alex  staff     0B  1æœˆ  8 21:03 error-2026-01-08-21.log
```

âœ… **í™•ì¸ ì‚¬í•­**:
- íŒŒì¼ëª… íŒ¨í„´: `application-YYYY-MM-DD-HH.log` (ì‹œê°„ ë‹¨ìœ„)
- ìë™ ìƒì„±ë¨
- Error ë¡œê·¸ íŒŒì¼ë„ ìƒì„±ë¨ (ì•„ì§ ì—ëŸ¬ ì—†ìŒ)

### ë¡œê·¸ ë‚´ìš© í™•ì¸

```json
{"level":"info","message":"ğŸš€ Server running on http://localhost:4000","timestamp":"2026-01-08 21:04:30"}
{"level":"info","message":"ğŸ“Š Environment: development","timestamp":"2026-01-08 21:04:30"}
{"level":"info","message":"ğŸ’¾ Database: Connected to PostgreSQL","timestamp":"2026-01-08 21:04:30"}
{"level":"http","message":"GET /health 200 1.967 ms - 123","timestamp":"2026-01-08 21:05:15"}
{"level":"http","message":"POST /api/turntables 400 15.435 ms - 396","timestamp":"2026-01-08 21:07:16"}
```

âœ… **í™•ì¸ ì‚¬í•­**:
- JSON í˜•ì‹ìœ¼ë¡œ êµ¬ì¡°í™”ë¨
- Timestamp í¬í•¨
- HTTP ìš”ì²­ ìë™ ë¡œê¹… (Morgan)
- ë‹¤ì–‘í•œ ë¡œê·¸ ë ˆë²¨ (info, http)

### ë¡œê·¸ ë¡œí…Œì´ì…˜ ì„¤ì • í™•ì¸

âœ… **ì„¤ì • í™•ì¸**:
- âœ… ì‹œê°„ ë‹¨ìœ„ ë¡œí…Œì´ì…˜ (`YYYY-MM-DD-HH`)
- âœ… 7ì¼ ë³´ê´€ (`maxFiles: '7d'`)
- âœ… íŒŒì¼ ì••ì¶• (`zippedArchive: true`)
- âœ… ìµœëŒ€ íŒŒì¼ í¬ê¸° (`maxSize: '20m'`)

---

## ğŸ“ ë³€ê²½ëœ íŒŒì¼ ëª©ë¡

### ì‹ ê·œ ìƒì„± (2ê°œ)
1. `src/config/logger.ts` - Winston ë¡œê±° ì„¤ì • (80+ lines)
2. `logs/.gitkeep` - ë””ë ‰í† ë¦¬ êµ¬ì¡° ìœ ì§€

### ìˆ˜ì • (3ê°œ)
1. `src/index.ts` - ë¡œê±° í†µí•© (Morgan + Winston)
   - Import ì¶”ê°€
   - Morgan ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€
   - console.log â†’ logger.info ë³€ê²½
2. `.gitignore` - logs í´ë” ì œì™¸ ì¶”ê°€
3. `README.md` - Logging ì„¹ì…˜ ì¶”ê°€ (60+ lines)

### ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ (4ê°œ)
- winston
- winston-daily-rotate-file
- morgan
- @types/morgan

---

## ğŸ¯ ë‹¬ì„±ëœ ìš”êµ¬ì‚¬í•­

| ìš”êµ¬ì‚¬í•­ | ìƒíƒœ | êµ¬í˜„ ë‚´ìš© |
|---------|------|----------|
| ì‹œê°„ ë‹¨ìœ„ ë¡œê·¸ ë¶„ë¦¬ | âœ… | `datePattern: 'YYYY-MM-DD-HH'` |
| 7ì¼ ë³´ê´€ | âœ… | `maxFiles: '7d'` |
| ìë™ ì‚­ì œ | âœ… | Winstonì´ ì˜¤ë˜ëœ íŒŒì¼ ìë™ ì‚­ì œ |
| êµ¬ì¡°í™”ëœ ë¡œê·¸ | âœ… | JSON í˜•ì‹ |
| HTTP ìš”ì²­ ë¡œê¹… | âœ… | Morgan í†µí•© |

---

## ğŸ“š ì‚¬ìš© ë°©ë²•

### ë¡œê·¸ í™•ì¸

```bash
# ìµœì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
tail -f logs/application-$(date +%Y-%m-%d-%H).log

# ì—ëŸ¬ ë¡œê·¸ í™•ì¸
tail -f logs/error-$(date +%Y-%m-%d-%H).log

# íŠ¹ì • ì‹œê°„ëŒ€ ë¡œê·¸ í™•ì¸
cat logs/application-2026-01-08-21.log | jq

# ì—ëŸ¬ ê²€ìƒ‰
cat logs/application-*.log | grep "error" | jq
```

### ë¡œê·¸ ë ˆë²¨

ì½”ë“œì—ì„œ ë¡œê±° ì‚¬ìš©:
```typescript
import logger from '@/config/logger';

logger.debug('Debug message');
logger.info('Info message');
logger.warn('Warning message');
logger.error('Error message', { error: err });
logger.http('HTTP message'); // Morganì´ ìë™ ìƒì„±
```

---

## ğŸ’¡ í–¥í›„ ê°œì„  ì‚¬í•­

### ë‹¨ê¸°
- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ë„êµ¬ í†µí•© (ì˜ˆ: ELK Stack, Grafana Loki)
- [ ] ë¡œê·¸ ì••ì¶• í™•ì¸ (7ì¼ í›„ ìë™ gzip)

### ì¤‘ê¸°
- [ ] ë¡œê·¸ ë¶„ì„ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [ ] ì—ëŸ¬ ì•Œë¦¼ ì‹œìŠ¤í…œ (Slack, Email)

### ì¥ê¸°
- [ ] ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê·¸ ê´€ë¦¬ (í”„ë¡œë•ì…˜ í™˜ê²½)
- [ ] ë¡œê·¸ ê¸°ë°˜ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

---

## ğŸ› ë°œê²¬ëœ ì´ìŠˆ

**í…ŒìŠ¤íŠ¸ ì¤‘ ë°œê²¬**:
- POST /api/turntables ìš”ì²­ì´ 400 ì—ëŸ¬ ë°œìƒ
- ë¡œê·¸ì— ê¸°ë¡ë¨: `"POST /api/turntables 400 15.435 ms - 396"`
- QA í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ì— ì´ë¯¸ ë¬¸ì„œí™”ë¨

---

## âœ… ê²€ì¦ ì™„ë£Œ

- âœ… ë¡œê·¸ íŒŒì¼ì´ ì‹œê°„ ë‹¨ìœ„ë¡œ ìƒì„±ë¨
- âœ… JSON í˜•ì‹ìœ¼ë¡œ êµ¬ì¡°í™”ë¨
- âœ… HTTP ìš”ì²­ì´ ìë™ ë¡œê¹…ë¨
- âœ… ê°œë°œ í™˜ê²½ì—ì„œ ì½˜ì†” ì¶œë ¥ í™•ì¸
- âœ… README ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- âœ… .gitignore ì„¤ì • ì™„ë£Œ

---

**ì‘ì—… ì™„ë£Œ ì‹œê°**: 2026-01-08 21:10 (KST)
**ì†Œìš” ì‹œê°„**: ì•½ 10ë¶„
